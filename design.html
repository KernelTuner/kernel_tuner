

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Design documentation &mdash; Kernel Tuner 0.2.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Contribution guide" href="contributing.html" />
    <link rel="prev" title="API Documentation" href="user-api.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Kernel Tuner
          

          
          </a>

          
            
            
              <div class="version">
                0.2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="convolution.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="diffusion.html">Tutorial: From physics to tuned GPU kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Kernel Tuner Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="matrix_multiplication.html">Matrix multiplication</a></li>
<li class="toctree-l1"><a class="reference internal" href="correctness.html">Kernel Correctness Verification</a></li>
<li class="toctree-l1"><a class="reference internal" href="hostcode.html">Tuning Host Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-api.html">API Documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Design documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#strategies">Strategies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#kernel-tuner-strategies-brute-force">kernel_tuner.strategies.brute_force</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kernel-tuner-strategies-random-sample">kernel_tuner.strategies.random_sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kernel-tuner-strategies-minimize">kernel_tuner.strategies.minimize</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kernel-tuner-strategies-basinhopping">kernel_tuner.strategies.basinhopping</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kernel-tuner-strategies-diff-evo">kernel_tuner.strategies.diff_evo</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#runners">Runners</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#kernel-tuner-runners-sequential-sequentialrunner">kernel_tuner.runners.sequential.SequentialRunner</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kernel-tuner-runners-noodles-noodlesrunner">kernel_tuner.runners.noodles.NoodlesRunner</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#device-interfaces">Device Interfaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#kernel-tuner-core-deviceinterface">kernel_tuner.core.DeviceInterface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kernel-tuner-cuda-cudafunctions">kernel_tuner.cuda.CudaFunctions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kernel-tuner-opencl-openclfunctions">kernel_tuner.opencl.OpenCLFunctions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kernel-tuner-c-cfunctions">kernel_tuner.c.CFunctions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#util-functions">Util Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#kernel-tuner-util">kernel_tuner.util</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contribution guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Kernel Tuner</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Design documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/benvanwerkhoven/kernel_tuner/blob/master/doc/source/design.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="design-documentation">
<h1>Design documentation<a class="headerlink" href="#design-documentation" title="Permalink to this headline">¶</a></h1>
<p>This section provides detailed information about the design and internals
of the Kernel Tuner. <strong>This information is mostly relevant for developers.</strong></p>
<p>The Kernel Tuner is designed to be extensible and support
different search and execution strategies. The current architecture of
the Kernel Tuner can be seen as:</p>
<a class="reference internal image-reference" href="_images/design.png"><img alt="_images/design.png" src="_images/design.png" style="width: 500pt;" /></a>
<p>At the top we have the kernel code and the Python script that tunes it,
which uses any of the main functions exposed in the user interface.</p>
<p>The strategies are responsible for iterating over and searching through
the search space. The default strategy is <code class="docutils literal notranslate"><span class="pre">brute_force</span></code>, which
iterates over all valid kernel configurations in the search space.
<code class="docutils literal notranslate"><span class="pre">random_sample</span></code> simply takes a random sample of the search space. More
advanced strategies currently implemented in Kernel Tuner are
<code class="docutils literal notranslate"><span class="pre">minimize</span></code>, <code class="docutils literal notranslate"><span class="pre">basinhopping</span></code>, and differential evolution
(<code class="docutils literal notranslate"><span class="pre">diff_evo</span></code>). How to use these is explained in the <a class="reference internal" href="user-api.html"><span class="doc">API Documentation</span></a>,
see the options <code class="docutils literal notranslate"><span class="pre">strategy</span></code> and <code class="docutils literal notranslate"><span class="pre">method</span></code>.</p>
<p>The runners are responsible for compiling and benchmarking the kernel
configurations selected by the strategy. The sequential runner is currently
the only supported runner, which does exactly what its name says. It compiles
and benchmarks configurations using a single sequential Python process.
Other parallel runners are foreseen in future releases.</p>
<p>The runners are implemented on top of a high-level <em>Device Interface</em>,
which wraps all the functionality for compiling and benchmarking
kernel configurations based on the low-level <em>Device Function Interface</em>.
Currently, we have
three different implementations of the device function interface, which
basically abstracts the different backends into a set of simple
functions such as <code class="docutils literal notranslate"><span class="pre">ready_argument_list</span></code> which allocates GPU memory and
moves data to the GPU, and functions like <code class="docutils literal notranslate"><span class="pre">compile</span></code>, <code class="docutils literal notranslate"><span class="pre">benchmark</span></code>, or
<code class="docutils literal notranslate"><span class="pre">run_kernel</span></code>. The functions in the core are basically the main
building blocks for implementing runners.</p>
<p>At the bottom, the three backends that we currently have are shown.
PyCUDA and PyOpenCL are for tuning either CUDA or OpenCL kernels. The C
Functions implementation can actually call any compiler, typically NVCC
or GCC is used. This backend was created not just to be able to tune C
functions, but mostly to tune C functions that also launch GPU kernels.</p>
<p>The rest of this section contains the API documentation of the modules
discussed above. For the documentation of the user API see the
<a class="reference internal" href="user-api.html"><span class="doc">API Documentation</span></a>.</p>
<div class="section" id="strategies">
<h2>Strategies<a class="headerlink" href="#strategies" title="Permalink to this headline">¶</a></h2>
<div class="section" id="kernel-tuner-strategies-brute-force">
<h3>kernel_tuner.strategies.brute_force<a class="headerlink" href="#kernel-tuner-strategies-brute-force" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="kernel-tuner-strategies-random-sample">
<h3>kernel_tuner.strategies.random_sample<a class="headerlink" href="#kernel-tuner-strategies-random-sample" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="kernel-tuner-strategies-minimize">
<h3>kernel_tuner.strategies.minimize<a class="headerlink" href="#kernel-tuner-strategies-minimize" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="kernel-tuner-strategies-basinhopping">
<h3>kernel_tuner.strategies.basinhopping<a class="headerlink" href="#kernel-tuner-strategies-basinhopping" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="kernel-tuner-strategies-diff-evo">
<h3>kernel_tuner.strategies.diff_evo<a class="headerlink" href="#kernel-tuner-strategies-diff-evo" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="runners">
<h2>Runners<a class="headerlink" href="#runners" title="Permalink to this headline">¶</a></h2>
<div class="section" id="kernel-tuner-runners-sequential-sequentialrunner">
<h3>kernel_tuner.runners.sequential.SequentialRunner<a class="headerlink" href="#kernel-tuner-runners-sequential-sequentialrunner" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="kernel-tuner-runners-noodles-noodlesrunner">
<h3>kernel_tuner.runners.noodles.NoodlesRunner<a class="headerlink" href="#kernel-tuner-runners-noodles-noodlesrunner" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="device-interfaces">
<h2>Device Interfaces<a class="headerlink" href="#device-interfaces" title="Permalink to this headline">¶</a></h2>
<div class="section" id="kernel-tuner-core-deviceinterface">
<h3>kernel_tuner.core.DeviceInterface<a class="headerlink" href="#kernel-tuner-core-deviceinterface" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="kernel-tuner-cuda-cudafunctions">
<h3>kernel_tuner.cuda.CudaFunctions<a class="headerlink" href="#kernel-tuner-cuda-cudafunctions" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="kernel-tuner-opencl-openclfunctions">
<h3>kernel_tuner.opencl.OpenCLFunctions<a class="headerlink" href="#kernel-tuner-opencl-openclfunctions" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="kernel-tuner-c-cfunctions">
<h3>kernel_tuner.c.CFunctions<a class="headerlink" href="#kernel-tuner-c-cfunctions" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="util-functions">
<h2>Util Functions<a class="headerlink" href="#util-functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="kernel-tuner-util">
<h3>kernel_tuner.util<a class="headerlink" href="#kernel-tuner-util" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="contributing.html" class="btn btn-neutral float-right" title="Contribution guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="user-api.html" class="btn btn-neutral float-left" title="API Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Ben van Werkhoven

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>